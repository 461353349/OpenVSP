CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

SET( ORIG_CMAKE_PREFIX_PATH ${CMAKE_PREFIX_PATH} )

SET( CMAKE_PREFIX_PATH ${CPPTEST_INSTALL_DIR} ${ORIG_CMAKE_PREFIX_PATH} )
FIND_PACKAGE(CPPTest REQUIRED)

SET( CMAKE_PREFIX_PATH ${LIBXML2_INSTALL_DIR} ${ORIG_CMAKE_PREFIX_PATH} )
FIND_PACKAGE(LibXml2 REQUIRED)

IF( NOT VSP_NO_GRAPHICS )
	SET( CMAKE_PREFIX_PATH ${FLTK_INSTALL_DIR} ${ORIG_CMAKE_PREFIX_PATH} )
	FIND_PACKAGE(FLTK REQUIRED)
	SET( FLTK_INCLUDE_DIR ${FLTK_INCLUDE_DIR} PARENT_SCOPE )
	SET( FLTK_LIBRARIES ${FLTK_LIBRARIES} PARENT_SCOPE )
	SET( OPENGL_LIBRARIES ${OPENGL_LIBRARIES} PARENT_SCOPE )

	SET( CMAKE_PREFIX_PATH ${FLTK_INSTALL_DIR} ${FLTK_INSTALL_DIR}/include/FL/images ${ORIG_CMAKE_PREFIX_PATH} )

	FIND_PACKAGE( JPEG_VSP REQUIRED )
	SET( JPEG_INCLUDE_DIR ${JPEG_INCLUDE_DIR} PARENT_SCOPE )
	SET( JPEG_LIBRARIES ${JPEG_LIBRARIES} PARENT_SCOPE )

	SET( CMAKE_PREFIX_PATH ${GLM_INSTALL_DIR} ${ORIG_CMAKE_PREFIX_PATH} )
	FIND_PACKAGE( GLM )
	SET( GLM_INCLUDE_DIR  ${GLM_INCLUDE_DIR} PARENT_SCOPE )

	SET( CMAKE_PREFIX_PATH ${GEW_INSTALL_DIR} ${ORIG_CMAKE_PREFIX_PATH} )
	# Use built-in FindGLEW.cmake
	FIND_PACKAGE(GLEW_VSP REQUIRED)

	ADD_SUBDIRECTORY( glfont2 )
ENDIF()

# Add Eigen3 and Code-Eli
SET( CMAKE_PREFIX_PATH ${EIGEN_INSTALL_DIR} ${ORIG_CMAKE_PREFIX_PATH} )
FIND_PACKAGE(Eigen3 3.0.0 REQUIRED)
SET( EIGEN3_INCLUDE_DIR  ${EIGEN3_INCLUDE_DIR} PARENT_SCOPE )

SET(CMAKE_PREFIX_PATH ${CODEELI_INSTALL_DIR} ${ORIG_CMAKE_PREFIX_PATH} )
FIND_PACKAGE(CodeEli 0.3.2 REQUIRED)
SET( CodeEli_INCLUDE_DIRS  ${CodeEli_INCLUDE_DIRS} PARENT_SCOPE )

SET(CMAKE_PREFIX_PATH ${CMINPACK_INSTALL_DIR} ${ORIG_CMAKE_PREFIX_PATH} )
FIND_PACKAGE(CMinpack REQUIRED)
SET( CMINPACK_INCLUDE_DIR  ${CMINPACK_INCLUDE_DIR} PARENT_SCOPE )
SET( CMINPACK_LIBRARIES  ${CMINPACK_LIBRARIES} PARENT_SCOPE )


SET( CMAKE_PREFIX_PATH ${ORIG_CMAKE_PREFIX_PATH} )

ADD_SUBDIRECTORY( triangle )
ADD_SUBDIRECTORY( nanoflann )
ADD_SUBDIRECTORY( sixseries )
ADD_SUBDIRECTORY( tritri )
